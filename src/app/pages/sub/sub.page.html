<ng-container *transloco="let t">

  <ion-header mode="ios">
    <ion-toolbar color="primary">
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/board" text=""></ion-back-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
  
  <ion-content mode="ios">

    <form [formGroup]="subForm">

      <div class="sub-card-container">
        <app-sub-card
          [name]="subForm.value.name"
          [platform]="subForm.value.platform"
          [plan]="subForm.value.plan">
        </app-sub-card>
      </div>

      <ion-item lines="full">
        <ion-label position="floating"> {{ t('sub.form.price') }} </ion-label>
        <ion-input formControlName="price" inputmode="decimal" type="number" [min]="-1"></ion-input>
      </ion-item>

      <ion-item lines="full">
        <ion-label position="floating"> {{ t('sub.form.platform') }} </ion-label>
        <ion-select formControlName="platform" interface="action-sheet">
          <ion-select-option [value]="option" *ngFor="let option of subscriptionPlatforms">
            {{ t('subscriptionPlatform.' + option.name) }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item lines="full">
        <ion-label position="floating"> {{ t('sub.form.name') }} </ion-label>
        <ion-input formControlName="name" inputmode="text" type="text"></ion-input>
      </ion-item>
  
      <ion-item lines="full">
        <ion-label position="floating"> {{ t('sub.form.plan') }} </ion-label>
        <ion-select formControlName="plan" interface="action-sheet">
          <ion-select-option [value]="option" *ngFor="let option of platformPlans">
            {{ t('subscriptionPlatform.plan.' + option.name) }}
          </ion-select-option>
        </ion-select>
      </ion-item>
  
      <ion-item lines="full">
        <ion-label position="floating"> {{ t('sub.form.type') }} </ion-label>
        <ion-select formControlName="type" interface="action-sheet">
          <ion-select-option [value]="planTypeEnum.daily"> {{ t('subscriptionPlatform.plan.type.' + planTypeEnum.daily) }} </ion-select-option>
          <ion-select-option [value]="planTypeEnum.weekly"> {{ t('subscriptionPlatform.plan.type.' + planTypeEnum.weekly) }} </ion-select-option>
          <ion-select-option [value]="planTypeEnum.monthly"> {{ t('subscriptionPlatform.plan.type.' + planTypeEnum.monthly) }} </ion-select-option>
          <ion-select-option [value]="planTypeEnum.yearly"> {{ t('subscriptionPlatform.plan.type.' + planTypeEnum.yearly) }} </ion-select-option>
        </ion-select>
      </ion-item>

      <div class="fab-buttons-container">
        <ion-fab-button mode="ios" color="danger" *ngIf="mode === modeEnum.modify"
          (click)="onClickDeleteSub()">
          <ion-icon name="trash-outline"></ion-icon>
        </ion-fab-button>
        <ion-fab-button mode="ios" color="primary" [disabled]="subForm.invalid"
          (click)="mode === modeEnum.new ? onClickAddNewSub() : onClickModifySub()">
          <ion-icon name="save-outline"></ion-icon>
        </ion-fab-button>
      </div>

    </form>
  
  </ion-content>

</ng-container>
